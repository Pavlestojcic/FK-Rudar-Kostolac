<!doctype html>
<html lang="sr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FK Rudar Kostolac</title>
<meta name="description" content="FK Rudar Kostolac | Zvanična klupska stranica" />

<!-- FAVICON (ikonica taba) -->
<link rel="icon" type="image/png" href="assets/img/rudar_logo_transparent.png">

<style>
:root{
--bg:#050907;
--panel:#0b120e;
--panel2:#0f1a14;
--text:#e9f3ec;
--muted:#a8c2b1;
--line:rgba(233,243,236,.12);
--green:#19c56b;
--green2:#0ee08a;
--shadow: 0 18px 60px rgba(0,0,0,.45);
--r1:18px;
--max:1180px;
--tickerSeconds: 54s; 
*{box-sizing:border-box}
html,body{height:100%}
body{
margin:0;
font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
background:
radial-gradient(900px 520px at 15% 10%, rgba(25,197,107,.18), transparent 60%),
radial-gradient(740px 480px at 82% 0%, rgba(14,224,138,.12), transparent 55%),
radial-gradient(900px 650px at 70% 90%, rgba(25,197,107,.10), transparent 60%),
linear-gradient(180deg, #050907 0%, #030604 100%);
color:var(--text);
overflow-x:hidden;
}
a{color:inherit; text-decoration:none}
.wrap{max-width:var(--max); margin:0 auto; padding:0 18px}

.topbar{
position:sticky; top:0; z-index:60;
background: rgba(5,9,7,.74);
backdrop-filter: blur(14px);
border-bottom:1px solid var(--line);
}
.topbar-inner{
display:flex; align-items:center; justify-content:space-between; gap:14px;
padding:12px 0;
}
.brand{display:flex; align-items:center; gap:12px; min-width:220px}
.brand img{
width:44px; height:44px; object-fit:contain;
filter: drop-shadow(0 10px 20px rgba(0,0,0,.45));
background:transparent !important;
border:0 !important;
border-radius:0 !important;
box-shadow:none !important;
padding:0 !important;
display:block;
}
.brand .t1{font-weight:950; letter-spacing:.6px; line-height:1.05}
.brand .t2{font-size:12px; color:var(--muted); margin-top:2px}

.top-actions{display:flex; align-items:center; gap:10px}
.iconlink,.ham-btn{
width:44px; height:44px; border-radius:14px;
border:1px solid rgba(233,243,236,.14);
background: rgba(15,26,20,.60);
display:flex; align-items:center; justify-content:center;
transition:.15s ease;
cursor:pointer;
}
.iconlink:hover,.ham-btn:hover{
border-color: rgba(25,197,107,.40);
background: rgba(25,197,107,.08);
}
.icon{width:18px; height:18px; opacity:.95}
.ham-lines{width:18px; height:12px; position:relative}
.ham-lines span{
position:absolute; left:0; right:0;
height:2px; border-radius:999px;
background: var(--text); opacity:.9;
}
.ham-lines span:nth-child(1){top:0}
.ham-lines span:nth-child(2){top:5px; opacity:.75}
.ham-lines span:nth-child(3){bottom:0; opacity:.9}

.drawer{position:fixed; inset:0; background: rgba(0,0,0,.58); display:none; z-index:120}
.drawer.open{display:block}
.drawer-panel{
position:absolute; top:0; right:0;
width:min(390px, 92vw); height:100%;
background: rgba(11,18,14,.92);
backdrop-filter: blur(16px);
border-left:1px solid rgba(233,243,236,.12);
padding:16px;
display:flex; flex-direction:column; gap:12px;
}
.drawer-head{
display:flex; align-items:center; justify-content:space-between; gap:10px;
padding-bottom:10px; border-bottom:1px solid rgba(233,243,236,.10);
}
.drawer-title{font-weight:950; letter-spacing:.5px}
.drawer-close{
width:40px; height:40px; border-radius:14px;
border:1px solid rgba(233,243,236,.14);
background: rgba(15,26,20,.72);
color:var(--text); cursor:pointer;
display:flex; align-items:center; justify-content:center;
}
.drawer-links{display:flex; flex-direction:column; gap:8px; padding-top:8px; overflow:auto}
.drawer-links button{
display:flex; align-items:center; justify-content:space-between; gap:10px;
padding:12px 12px; border-radius:16px;
border:1px solid rgba(233,243,236,.10);
background: rgba(15,26,20,.55);
color:var(--text);
font-weight:950; letter-spacing:.2px;
cursor:pointer; text-align:left;
}
.drawer-links button span{color:var(--muted); font-weight:900; font-size:12px}

.ticker{border-bottom:1px solid var(--line); background: rgba(0,0,0,.25); overflow:hidden}
.ticker-inner{display:flex; align-items:center; gap:14px; padding:10px 0}
.ticker-badge{
display:flex; align-items:center; gap:10px;
padding:9px 12px;
border:1px solid rgba(25,197,107,.35);
border-radius:999px;
background: rgba(25,197,107,.10);
font-weight:950; letter-spacing:.3px;
font-size:12px; white-space:nowrap;
}
.dot{
width:8px; height:8px; border-radius:99px;
background: var(--green2);
box-shadow: 0 0 0 6px rgba(14,224,138,.10);
}
.ticker-track{flex:1; overflow:hidden}
.ticker-move{
display:inline-flex; gap:12px; align-items:center; white-space:nowrap;
will-change: transform;
animation: ticker var(--tickerSeconds) linear infinite;
}
.tick{
display:inline-flex; align-items:center; gap:10px;
padding:10px 12px;
border-radius:999px;
border:1px solid rgba(233,243,236,.12);
background: rgba(11,18,14,.55);
color:var(--text);
font-weight:950; letter-spacing:.2px;
font-size:12px;
}
.tick small{color:var(--muted); font-weight:900; font-size:11px}
.tick strong{color:var(--green2)}
@keyframes ticker{from{transform: translateX(0)}to{transform: translateX(-50%)}}

.card{
background: rgba(11,18,14,.78);
border:1px solid rgba(233,243,236,.12);
border-radius: 18px;
box-shadow: 0 18px 60px rgba(0,0,0,.45);
overflow:hidden;
}

main{padding:18px 0 26px}
.view{display:none}
.view.active{display:block}

.hero{display:grid; grid-template-columns: 1.35fr .65fr; gap:16px; margin-top:14px}
.hero-main{position:relative; min-height:280px}
.hero-img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:.38}
.hero-overlay{
position:absolute; inset:0;
background:
linear-gradient(90deg, rgba(5,9,7,.95) 0%, rgba(5,9,7,.65) 55%, rgba(5,9,7,.35) 100%),
radial-gradient(600px 260px at 25% 35%, rgba(25,197,107,.22), transparent 60%);
}
.hero-content{position:relative; padding:22px; display:flex; flex-direction:column; gap:12px}
.kickers{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
.pill{
padding:8px 12px; border-radius:999px;
border:1px solid rgba(233,243,236,.12);
background: rgba(15,26,20,.55);
color:var(--muted);
font-weight:950; letter-spacing:.2px; font-size:12px;
}
.pill.green{
border-color: rgba(25,197,107,.35);
background: rgba(25,197,107,.10);
color: var(--text);
}
h1{margin:0; font-size: clamp(24px, 3.2vw, 38px); line-height:1.05; letter-spacing:.6px}
.sub{color:var(--muted); font-weight:800; line-height:1.35; max-width: 62ch}

.hero-side{padding:16px; display:flex; flex-direction:column; gap:12px}
.mini-title{margin:0; font-weight:950; letter-spacing:.35px; font-size:14px}
.kv{display:grid; grid-template-columns:1fr; gap:10px}
.kv .row{
display:flex; align-items:flex-start; justify-content:space-between; gap:12px;
padding:10px 12px; border-radius:16px;
border:1px solid rgba(233,243,236,.10);
background: rgba(15,26,20,.45);
}
.kv .k{color:var(--muted); font-weight:950; font-size:12px; letter-spacing:.2px}
.kv .v{font-weight:950; font-size:13px; text-align:right}

.home-grid{display:grid; grid-template-columns: 1fr 1fr; gap:16px; margin-top:16px}
.section-head{display:flex; align-items:flex-end; justify-content:space-between; gap:14px; margin: 6px 0 10px}
.section-head h2{margin:0; font-size:18px; letter-spacing:.4px}
.section-head p{margin:0; color:var(--muted); font-weight:800; font-size:13px; line-height:1.3; text-align:right}

.matches-card{padding:14px}
.match-list{display:flex; flex-direction:column; gap:10px; margin-top:10px}
.match{
display:grid; grid-template-columns: 92px 1fr auto; gap:12px; align-items:center;
padding:12px 12px; border-radius:16px;
border:1px solid rgba(233,243,236,.10);
background: rgba(15,26,20,.45);
}
.when{display:flex; flex-direction:column; gap:3px}
.when b{font-weight:950; letter-spacing:.2px; font-size:13px}
.when span{color:var(--muted); font-weight:900; font-size:11px}
.vs{display:flex; align-items:center; justify-content:space-between; gap:10px; min-width:0}
.club{display:flex; align-items:center; gap:10px; min-width:0}
.club .n{
font-weight:950; letter-spacing:.2px;
white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
max-width: 34ch;
}
.tag{
padding:7px 10px; border-radius:999px;
border:1px solid rgba(233,243,236,.12);
background: rgba(11,18,14,.55);
color:var(--muted);
font-weight:950; font-size:11px; letter-spacing:.2px;
white-space:nowrap;
}
.tag.home{
border-color: rgba(25,197,107,.35);
background: rgba(25,197,107,.10);
color: var(--text);
}

.table-card{padding:14px}
.table-wrap{
width:100%;
overflow:auto;
border-radius: 16px;
border:1px solid rgba(233,243,236,.10);
background: rgba(15,26,20,.35);
}
table{width:100%; border-collapse:collapse; min-width: 720px}
thead th{
text-align:left; font-size:12px; color:var(--muted);
font-weight:950; letter-spacing:.2px;
padding:10px 10px;
border-bottom:1px solid rgba(233,243,236,.10);
background: rgba(11,18,14,.65);
position:sticky; top:0; z-index:1;
}
tbody td{
padding:10px 10px;
border-bottom:1px solid rgba(233,243,236,.08);
font-weight:850; font-size:13px; white-space:nowrap;
}
tbody tr:hover{background: rgba(25,197,107,.06)}
.pos{width:42px; color:var(--muted); font-weight:950}
.highlight{outline: 2px solid rgba(25,197,107,.22); background: rgba(25,197,107,.06)}
.pts{font-weight:950; color: var(--green2)}

.view-pad{padding:14px}
.news-item{
padding:14px 12px;
border-radius:16px;
border:1px solid rgba(233,243,236,.10);
background: rgba(15,26,20,.45);
}
.news-item h3{margin:0 0 8px; font-size:15px; letter-spacing:.2px}
.meta{display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-bottom:10px}
.meta span{
font-size:11px; font-weight:950; letter-spacing:.2px;
color:var(--muted);
border:1px solid rgba(233,243,236,.10);
background: rgba(11,18,14,.50);
padding:7px 10px; border-radius:999px;
}
.news-item p{margin:0; opacity:.92; font-weight:800; line-height:1.5}
.news-img{
width:100%;
max-height:340px;
object-fit:cover;
border-radius:14px;
border:1px solid rgba(233,243,236,.10);
margin:10px 0;
display:block;
}

details.group{
border:1px solid rgba(233,243,236,.10);
background: rgba(15,26,20,.40);
border-radius:16px;
overflow:hidden;
}
details.group + details.group{margin-top:10px}
details.group summary{
list-style:none;
cursor:pointer;
padding:14px 14px;
display:flex;
align-items:center;
justify-content:space-between;
gap:12px;
font-weight:950;
letter-spacing:.2px;
}
details.group summary::-webkit-details-marker{display:none}
.chev{width:18px; height:18px; transition: transform .15s ease; opacity:.9}
details[open] .chev{transform: rotate(180deg)}
.players{display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; padding: 0 14px 14px}
.p{
border:1px solid rgba(233,243,236,.10);
background: rgba(11,18,14,.55);
border-radius:16px;
padding:12px;
display:flex;
gap:10px;
align-items:center;
min-width:0;
}
.ph{
width:48px; height:48px;
border-radius:14px;
border:1px solid rgba(233,243,236,.10);
background: rgba(25,197,107,.08);
overflow:hidden;
flex:0 0 auto;
display:flex; align-items:center; justify-content:center;
}
.ph img{width:100%; height:100%; object-fit:cover; display:block}
.p .info{min-width:0}
.line1{display:flex; align-items:baseline; justify-content:space-between; gap:10px}
.name{font-weight:950; letter-spacing:.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-size:13px}
.num{color: var(--green2); font-weight:950; font-size:12px; white-space:nowrap}
.ppos{margin-top:3px; color:var(--muted); font-weight:900; font-size:12px}

.contact{display:flex; flex-direction:column; gap:10px; margin-top:10px}
.cbtn{
display:flex; align-items:center; justify-content:space-between; gap:12px;
padding:12px 12px; border-radius:16px;
border:1px solid rgba(233,243,236,.10);
background: rgba(15,26,20,.45);
font-weight:950; letter-spacing:.2px;
}
.cbtn small{color:var(--muted); font-weight:900; font-size:12px}
.iconbtn{display:inline-flex; align-items:center; gap:10px}

.modal{position:fixed; inset:0; display:none; z-index:140; background: rgba(0,0,0,.62); padding:16px}
.modal.open{display:flex}
.modal-card{
margin:auto; width:min(760px, 96vw);
background: rgba(11,18,14,.92);
border:1px solid rgba(233,243,236,.12);
border-radius: 18px;
box-shadow: 0 18px 60px rgba(0,0,0,.45);
overflow:hidden;
}
.modal-head{
display:flex; align-items:center; justify-content:space-between; gap:10px;
padding:14px 14px; border-bottom:1px solid rgba(233,243,236,.10);
}
.modal-head b{font-weight:950; letter-spacing:.3px}
.modal-close{
width:40px; height:40px; border-radius:14px;
border:1px solid rgba(233,243,236,.14);
background: rgba(15,26,20,.72);
color:var(--text); cursor:pointer;
display:flex; align-items:center; justify-content:center;
}
/* SKROL U ADMIN PANELU */
.modal-body{
padding:14px;
max-height: calc(100vh - 140px);
overflow: auto;
-webkit-overflow-scrolling: touch;
}

.row2{display:grid; grid-template-columns: 1fr 1fr; gap:10px}
.field{display:flex; flex-direction:column; gap:6px; margin-top:10px}
.field label{font-size:12px; color:var(--muted); font-weight:950; letter-spacing:.2px}
input, textarea, select{
width:100%; padding:12px 12px; border-radius:14px;
border:1px solid rgba(233,243,236,.12);
background: rgba(15,26,20,.45);
color: var(--text);
font-weight:850;
outline:none;
}
textarea{min-height:110px; resize:vertical}
.actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
.btn{
display:inline-flex; align-items:center; justify-content:center; gap:10px;
padding:12px 14px; border-radius:14px;
border:1px solid rgba(233,243,236,.12);
background: rgba(15,26,20,.55);
color: var(--text);
font-weight:950; letter-spacing:.2px;
cursor:pointer; transition:.15s ease; user-select:none;
}
.btn:hover{border-color: rgba(25,197,107,.40); background: rgba(25,197,107,.08)}
.btn.primary{border-color: rgba(25,197,107,.55); background: rgba(25,197,107,.16)}
.btn.primary:hover{background: rgba(25,197,107,.22)}
.hint{margin-top:10px; color:var(--muted); font-weight:850; line-height:1.45; font-size:12px}
.sep{border:none; border-top:1px solid rgba(233,243,236,.10); margin:14px 0}

footer{
margin-top:18px; padding:18px 0 26px;
border-top:1px solid rgba(233,243,236,.10);
color: var(--muted);
font-weight:850;
font-size:12px;
}

@media (max-width: 980px){
.hero{grid-template-columns: 1fr}
.home-grid{grid-template-columns: 1fr}
.players{grid-template-columns: repeat(2, 1fr)}
}

/* OPTIMIZACIJA ZA TELEFON */
@media (max-width: 520px){
.players{grid-template-columns: 1fr}

.match{
grid-template-columns: 74px 1fr;
gap:10px;
padding:10px 10px;
}

.when b{font-size:12px}
.when span{font-size:10px}

.match .tag{display:none}

.club .n{
max-width:none;
white-space:normal;
overflow:visible;
text-overflow:unset;
display:-webkit-box;
-webkit-line-clamp:2;
-webkit-box-orient:vertical;
font-size:13px;
line-height:1.15;
}

.vs strong{font-size:12px}
}
</style>
</head>

<body>
<header class="topbar">
<div class="wrap">
<div class="topbar-inner">
<div class="brand">
<img src="assets/img/rudar_logo_transparent.png" alt="FK Rudar logo" />
<div>
<div class="t1">FK RUDAR KOSTOLAC</div>
<div class="t2">Zona Dunav • Zeleno crna</div>
</div>
</div>

<div class="top-actions">
<a class="iconlink" href="https://www.instagram.com/fkrudarkostolac/" target="_blank" rel="noopener" aria-label="Instagram">
<svg class="icon" viewBox="0 0 24 24" fill="none">
<path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Z" stroke="currentColor" stroke-width="2"/>
<path d="M12 16a4 4 0 1 0-4-4 4 4 0 0 0 4 4Z" stroke="currentColor" stroke-width="2"/>
<path d="M17.5 6.5h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
</svg>
</a>

<a class="iconlink" href="https://www.facebook.com/people/Fk-Rudar-Kostolac/61575326861686/" target="_blank" rel="noopener" aria-label="Facebook">
<svg class="icon" viewBox="0 0 24 24" fill="none">
<path d="M14 9h3V6h-3c-1.7 0-3 1.3-3 3v3H8v3h3v6h3v-6h3l1-3h-4V9c0-.6.4-1 1-1Z" fill="currentColor"/>
</svg>
</a>

<button class="ham-btn" id="hamBtn" aria-label="Otvori meni">
<div class="ham-lines"><span></span><span></span><span></span></div>
</button>
</div>
</div>
</div>
</header>

<div class="ticker">
<div class="wrap">
<div class="ticker-inner">
<div class="ticker-badge"><span class="dot"></span> Naredne utakmice</div>
<div class="ticker-track"><div class="ticker-move" id="tickerMove"></div></div>
</div>
</div>
</div>

<main>
<div class="wrap">

<section class="view active" id="viewHome">
<div class="hero">
<div class="card hero-main">
<img class="hero-img" src="stadion.jpg" alt="Stadion" onerror="this.style.display='none'" />
<div class="hero-overlay"></div>
<div class="hero-content">
<div class="kickers">
<div class="pill green">Zona Dunav</div>
<div class="pill">Stadion: Bora Beka</div>
<div class="pill">Trener: Novica Gajić</div>
</div>
<h1>FK Rudar Kostolac</h1>
<div class="sub">Brze info. Naredne 3. Tabela na dnu.</div>
</div>
</div>

<div class="card hero-side">
<p class="mini-title">Brze informacije</p>
<div class="kv">
<div class="row"><div class="k">Takmičenje</div><div class="v">Zona Dunav</div></div>
<div class="row"><div class="k">Boje</div><div class="v">Zeleno • Crna</div></div>
<div class="row"><div class="k">Stadion</div><div class="v">Bora Beka</div></div>
<div class="row"><div class="k">Trener</div><div class="v">Novica Gajić</div></div>
</div>
</div>
</div>

<div class="home-grid">
<div class="card matches-card">
<div class="section-head" style="margin:0 0 6px">
<h2>Naredne 3</h2>
<p>Zona Dunav + ostalo</p>
</div>
<div class="match-list" id="nextMatches"></div>
</div>

<div class="card matches-card">
<div class="section-head" style="margin:0 0 6px">
<h2>Najnovija vest</h2>
<p>Zvanične objave</p>
</div>
<div class="news-item" style="margin-top:10px">
<h3 id="homeNewsTitle"></h3>
<div class="meta"><span id="homeNewsDate"></span></div>
<img id="homeNewsImg" class="news-img" style="display:none" alt="" />
<p id="homeNewsBody"></p>
</div>
</div>
</div>

<div style="margin-top:16px">
<div class="section-head">
<h2>Tabela</h2>
<p>Zona Dunav</p>
</div>

<div class="card table-card">
<div class="table-wrap">
<table>
<thead>
<tr>
<th class="pos">Poz</th>
<th>Tim</th>
<th>U</th>
<th>P</th>
<th>N</th>
<th>Por</th>
<th>DG</th>
<th>PG</th>
<th>GR</th>
<th>Bod</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>
<div class="hint" id="tableNote"></div>
</div>
</div>
</div>
</section>

<section class="view" id="viewSchedule">
<div class="card view-pad">
<div class="section-head" style="margin:0 0 10px">
<h2>Raspored</h2>
<p>Liga, kup, pripremne</p>
</div>
<div class="match-list" id="allMatches"></div>
</div>
</section>

<section class="view" id="viewNews">
<div class="card view-pad">
<div class="section-head" style="margin:0 0 10px">
<h2>Vesti</h2>
<p>Objave</p>
</div>
<div id="newsList"></div>
</div>
</section>

<section class="view" id="viewTeam">
<div class="card view-pad">
<div class="section-head" style="margin:0 0 10px">
<h2>Tim</h2>
<p>Slike: assets/players/ime_prezime_broj.png ili .jpg</p>
</div>
<div id="teamGroups"></div>
</div>
</section>

<section class="view" id="viewContact">
<div class="card view-pad">
<div class="section-head" style="margin:0 0 10px">
<h2>Kontakt</h2>
<p>Mreže</p>
</div>

<div class="contact">
<a class="cbtn" href="https://www.instagram.com/fkrudarkostolac/" target="_blank" rel="noopener">
<span class="iconbtn">
<svg class="icon" viewBox="0 0 24 24" fill="none">
<path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Z" stroke="currentColor" stroke-width="2"/>
<path d="M12 16a4 4 0 1 0-4-4 4 4 0 0 0 4 4Z" stroke="currentColor" stroke-width="2"/>
<path d="M17.5 6.5h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
</svg>
Instagram
</span>
<small>@fkrudarkostolac</small>
</a>

<a class="cbtn" href="https://www.facebook.com/people/Fk-Rudar-Kostolac/61575326861686/" target="_blank" rel="noopener">
<span class="iconbtn">
<svg class="icon" viewBox="0 0 24 24" fill="none">
<path d="M14 9h3V6h-3c-1.7 0-3 1.3-3 3v3H8v3h3v6h3v-6h3l1-3h-4V9c0-.6.4-1 1-1Z" fill="currentColor"/>
</svg>
Facebook
</span>
<small>FK Rudar Kostolac</small>
</a>
</div>
</div>
</section>

<footer>
<div class="wrap">FK Rudar Kostolac • Zona Dunav</div>
</footer>

</div>
</main>

<div class="drawer" id="drawer" aria-hidden="true">
<div class="drawer-panel" role="dialog" aria-modal="true">
<div class="drawer-head">
<div class="drawer-title">FK Rudar Kostolac</div>
<button class="drawer-close" id="drawerClose" aria-label="Zatvori meni">✕</button>
</div>

<div class="drawer-links" id="drawerLinks">
<button data-view="viewHome">Početna <span>brze info</span></button>
<button data-view="viewSchedule">Raspored <span>utakmice</span></button>
<button data-view="viewNews">Vesti <span>objave</span></button>
<button data-view="viewTeam">Tim <span>igrači</span></button>
<button data-view="viewContact">Kontakt <span>mreže</span></button>
<button id="adminMenuBtn">Admin <span>PIN</span></button>
</div>
</div>
</div>

<div class="modal" id="adminModal" aria-hidden="true">
<div class="modal-card" role="dialog" aria-modal="true">
<div class="modal-head">
<b>Admin</b>
<button class="modal-close" id="adminClose">✕</button>
</div>

<div class="modal-body">
<div class="field">
<label>PIN</label>
<input id="pinInput" type="password" placeholder="Unesi PIN" />
</div>

<div class="actions">
<button class="btn primary" id="unlockBtn">Ulaz</button>
<button class="btn" id="lockBtn" type="button">Izlaz</button>
</div>

<div id="adminForms" style="display:none">

<hr class="sep">

<b>Upload slike vesti</b>
<div class="field"><label>Izaberi sliku</label><input id="newsFile" type="file" accept="image/*" /></div>
<div class="actions"><button class="btn primary" id="uploadNewsImgBtn">Upload</button></div>
<div class="hint" id="uploadHint"></div>

<hr class="sep">

<b>Dodaj vest</b>
<div class="field"><label>Naslov</label><input id="nTitle" placeholder="Naslov" /></div>
<div class="field"><label>Slika (URL)</label><input id="nImage" placeholder="Nakon upload-a auto popuni" /></div>
<div class="field"><label>Tekst</label><textarea id="nBody" placeholder="Tekst vesti"></textarea></div>
<div class="actions"><button class="btn primary" id="addNewsBtn">Dodaj vest</button></div>

<hr class="sep">

<b>Dodaj utakmicu</b>
<div class="row2">
<div class="field"><label>Datum (YYYY-MM-DD)</label><input id="mDate" placeholder="2026-03-15" /></div>
<div class="field"><label>Vreme</label><input id="mTime" placeholder="14:30" /></div>
</div>
<div class="row2">
<div class="field"><label>Domaćin</label><input id="mHome" placeholder="Pomoravlje 1946" /></div>
<div class="field"><label>Gost</label><input id="mAway" placeholder="Rudar Kostolac" /></div>
</div>
<div class="row2">
<div class="field"><label>Takmičenje</label><input id="mComp" placeholder="Zona Dunav" /></div>
<div class="field"><label>Kolo</label><input id="mRound" placeholder="15. kolo" /></div>
</div>
<div class="field"><label>Lokacija</label><input id="mVenue" placeholder="Kostolac / Gostovanje" /></div>
<div class="actions"><button class="btn primary" id="addMatchBtn">Dodaj utakmicu</button></div>

<hr class="sep">

<b>Dodaj igrača</b>
<div class="row2">
<div class="field"><label>Ime</label><input id="pName" placeholder="Miloš Ostojić" /></div>
<div class="field"><label>Broj</label><input id="pNum" placeholder="20" /></div>
</div>
<div class="field">
<label>Pozicija</label>
<select id="pPos">
<option value="golmani">Golmani</option>
<option value="odbrana">Odbrana</option>
<option value="sredina">Sredina</option>
<option value="napad">Napad</option>
</select>
</div>
<div class="hint">Slika igrača: assets/players/ime_prezime_broj.png ili .jpg</div>
<div class="actions"><button class="btn primary" id="addPlayerBtn">Dodaj igrača</button></div>

<hr class="sep">

<b>Tabela</b>
<div class="field">
<label>Paste CSV (Tim;U;P;N;Por;DG;PG;GR;Bod)</label>
<textarea id="tablePaste" placeholder="Rudar Kostolac;14;7;2;5;23;21;2;23"></textarea>
</div>
<div class="row2">
<div class="field"><label>Sezona</label><input id="tSeason" value="2025/2026" /></div>
<div class="field"><label>Kolo</label><input id="tRound" value="14. kolo" /></div>
</div>
<div class="actions"><button class="btn primary" id="importTableBtn">Uvezi tabelu</button></div>

</div>

<div class="hint" style="margin-top:12px">
Admin radi samo kad je online verzija sa Netlify function (/.netlify/functions/admin).
</div>
</div>
</div>
</div>

<script>
const SUPABASE_URL = "https://mjmqqomefxdpqugwvesg.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1qbXFxb21lZnhkcHF1Z3d2ZXNnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkxODAxMjUsImV4cCI6MjA4NDc1NjEyNX0.ZBPrtLp1LV-XiwAb6YdQTcfLlBUTpznK7c5vb0Pd8QQ";

const CLUB_NAME = "Rudar Kostolac";

function formatDateISO(iso){
const s = String(iso || "");
const m = s.match(/^(\d{4})-(\d{2})-(\d{2})$/);
if(!m) return s || "";
return `${m[3]}.${m[2]}.${m[1]}`;
}
function toSlug(text) {
return String(text || "")
.toLowerCase()
.trim()
.replaceAll("đ","dj")
.replaceAll("č","c")
.replaceAll("ć","c")
.replaceAll("š","s")
.replaceAll("ž","z")
.replace(/[^a-z0-9\s_]/g, "")
.replace(/\s+/g, "_");
}
function playerImgByRule(fullName, number){
const base = `assets/players/${toSlug(fullName)}_${number}`;
return { png: `${base}.png`, jpg: `${base}.jpg` };
}

/* TELEFON: skrati FK/OFK itd. */
function shortClubName(name){
return String(name || "")
.replace(/\b(FK|OFK|SK|NK)\b\.?/gi, "")
.replace(/\s+/g, " ")
.trim();
}
function normClubName(name){
return shortClubName(name).toLowerCase();
}

async function supaGet(path){
const res = await fetch(SUPABASE_URL + path, {
headers: {
"apikey": SUPABASE_ANON_KEY,
"Authorization": "Bearer " + SUPABASE_ANON_KEY,
"Accept": "application/json"
}
});
if(!res.ok) throw new Error("Supabase read failed");
return res.json();
}

async function adminPost(payload){
const res = await fetch("/.netlify/functions/admin", {
method: "POST",
headers: {"Content-Type":"application/json"},
body: JSON.stringify(payload)
});
const data = await res.json().catch(()=>({ok:false}));
if(!res.ok || !data.ok) throw new Error(data.error || "Admin failed");
return data;
}

const views = ["viewHome","viewSchedule","viewNews","viewTeam","viewContact"];
function showView(id){
views.forEach(v=>{
const el = document.getElementById(v);
if(el) el.classList.toggle("active", v === id);
});
window.scrollTo({top:0, behavior:"smooth"});
}

const drawer = document.getElementById("drawer");
document.getElementById("hamBtn").addEventListener("click", ()=>{
drawer.classList.add("open");
drawer.setAttribute("aria-hidden","false");
});
document.getElementById("drawerClose").addEventListener("click", ()=>{
drawer.classList.remove("open");
drawer.setAttribute("aria-hidden","true");
});
drawer.addEventListener("click", (e)=>{
if(e.target === drawer){
drawer.classList.remove("open");
drawer.setAttribute("aria-hidden","true");
}
});

document.getElementById("drawerLinks").addEventListener("click", (e)=>{
const btn = e.target.closest("button[data-view]");
if(btn){
const id = btn.getAttribute("data-view");
drawer.classList.remove("open");
drawer.setAttribute("aria-hidden","true");
showView(id);
}
});

function matchBadge(home, away){
const club = normClubName(CLUB_NAME);
if(normClubName(home) === club) return {t:"KOD KUĆE", cls:"home"};
if(normClubName(away) === club) return {t:"GOSTI", cls:""};
return {t:"", cls:""};
}

function matchCard(m){
const date = formatDateISO(m.match_date);
const time = m.match_time || "";
const b = matchBadge(m.home_team, m.away_team);
const small = [time, (m.competition||"Zona Dunav")].filter(Boolean).join(" • ");
const tagText = b.t || (m.round || "");

return `
<div class="match">
<div class="when">
<b>${date || "Datum uskoro"}</b>
<span>${small}</span>
</div>

<div class="vs">
<div class="club"><div class="n">${shortClubName(m.home_team)}</div></div>
<strong style="color:var(--green2); font-weight:950">vs</strong>
<div class="club" style="justify-content:flex-end"><div class="n">${shortClubName(m.away_team)}</div></div>
</div>

<div class="tag ${b.cls}">${tagText}</div>
</div>
`;
}

function tableRow(pos, row){
const isClub = row.team === CLUB_NAME;
return `
<tr class="${isClub ? "highlight" : ""}">
<td class="pos">${pos}</td>
<td>${row.team}</td>
<td>${row.played}</td>
<td>${row.wins}</td>
<td>${row.draws}</td>
<td>${row.losses}</td>
<td>${row.goals_for}</td>
<td>${row.goals_against}</td>
<td>${row.goal_diff}</td>
<td class="pts">${row.points}</td>
</tr>
`;
}

function renderTicker(matches){
const holder = document.getElementById("tickerMove");
const items = matches.slice(0,10);

const html = items.map(m=>{
const date = formatDateISO(m.match_date) || "Uskoro";
const time = m.match_time || "";
const b = matchBadge(m.home_team, m.away_team);
const label = b.t || (m.competition || "Utakmica");
return `
<span class="tick">
<small>${date} ${time}</small>
<strong>${label}</strong>
<span>${shortClubName(m.home_team)} vs ${shortClubName(m.away_team)}</span>
</span>
`;
}).join("");

holder.innerHTML = html + html;
}

function renderHomeNews(n){
document.getElementById("homeNewsTitle").textContent = n?.title || "Pripreme za prolećni deo sezone";
document.getElementById("homeNewsDate").textContent = n?.created_at ? new Date(n.created_at).toLocaleString("sr-RS") : "";

const img = document.getElementById("homeNewsImg");
const src = String(n?.image_url || "").trim();
if(src){
img.src = src;
img.style.display = "block";
} else {
img.style.display = "none";
}

const body = String(n?.body || "Prvi tim FK Rudar Kostolac počinje pripreme 1. februara. Plan rada obuhvata kondicioni deo, taktičke treninge i kontrolne utakmice. Tačan raspored biće objavljen u sekciji Raspored.").trim();
document.getElementById("homeNewsBody").innerHTML = body.split("\n").slice(0,6).join("<br>");
}

function renderNews(list){
const host = document.getElementById("newsList");
if(!list || !list.length){
host.innerHTML = `<div class="news-item"><h3>Pripreme za prolećni deo sezone</h3><div class="meta"><span>01.02.</span></div><p>Prvi tim počinje pripreme 1. februara. Raspored i vesti će se redovno ažurirati.</p></div>`;
return;
}
host.innerHTML = list.map(n=>{
const img = String(n.image_url||"").trim();
const imgHtml = img ? `<img class="news-img" src="${img}" alt="" onerror="this.style.display='none'">` : "";
const date = n.created_at ? new Date(n.created_at).toLocaleString("sr-RS") : "";
return `
<div class="news-item">
<h3>${n.title}</h3>
<div class="meta"><span>${date}</span></div>
${imgHtml}
<p>${String(n.body||"").replace(/\n/g,"<br>")}</p>
</div>
`;
}).join("");
}

function renderTeam(players){
const host = document.getElementById("teamGroups");
const order = ["golmani","odbrana","sredina","napad"];
const label = {golmani:"Golmani", odbrana:"Odbrana", sredina:"Sredina", napad:"Napad"};

host.innerHTML = "";
order.forEach((pos, idx)=>{
const group = (players||[])
.filter(p=>p.position_group===pos)
.sort((a,b)=>(a.number||0)-(b.number||0));

const det = document.createElement("details");
det.className = "group";
det.open = idx === 0;

det.innerHTML = `
<summary>
<span>${label[pos]} <span style="color:var(--muted); font-weight:900">(${group.length})</span></span>
<svg class="chev" viewBox="0 0 24 24" fill="none">
<path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</summary>
<div class="players"></div>
`;

const grid = det.querySelector(".players");
group.forEach(p=>{
const paths = playerImgByRule(p.full_name, p.number);
const img = document.createElement("img");
img.src = paths.png;
img.alt = p.full_name;
img.onerror = () => { img.onerror=null; img.src = paths.jpg; };

const el = document.createElement("div");
el.className = "p";
el.innerHTML = `
<div class="ph"></div>
<div class="info">
<div class="line1">
<div class="name">${p.full_name}</div>
<div class="num">#${p.number}</div>
</div>
<div class="ppos">${label[pos]}</div>
</div>
`;
el.querySelector(".ph").appendChild(img);
grid.appendChild(el);
});

host.appendChild(det);
});
}

function sortMatches(a,b){
const da = a.match_date ? new Date(a.match_date).getTime() : 9e15;
const db = b.match_date ? new Date(b.match_date).getTime() : 9e15;
return da - db;
}

async function loadAll(){
const [news, matches, players, tableRows] = await Promise.all([
supaGet("/rest/v1/news?select=*&order=created_at.desc"),
supaGet("/rest/v1/matches?select=*"),
supaGet("/rest/v1/players?select=*"),
supaGet("/rest/v1/table_rows?select=*")
]);

(matches||[]).sort(sortMatches);

renderTicker(matches||[]);
document.getElementById("nextMatches").innerHTML = (matches||[]).slice(0,3).map(matchCard).join("") || `<div class="hint">Dodaj utakmice u Adminu.</div>`;
document.getElementById("allMatches").innerHTML = (matches||[]).map(matchCard).join("") || `<div class="hint">Dodaj utakmice u Adminu.</div>`;

renderNews(news||[]);
renderHomeNews((news||[])[0]);

renderTeam(players||[]);

const sorted = [...(tableRows||[])].sort((a,b)=>{
if (b.points !== a.points) return b.points - a.points;
if (b.goal_diff !== a.goal_diff) return b.goal_diff - a.goal_diff;
return b.goals_for - a.goals_for;
});

document.getElementById("tableBody").innerHTML = sorted.map((r,i)=>tableRow(i+1, r)).join("") || `<tr><td colspan="10" style="padding:14px;color:var(--muted)">Tabela prazna. Uvezi u Adminu.</td></tr>`;

const note = document.getElementById("tableNote");
const one = sorted[0];
note.textContent = one ? `Sezona: ${one.season || "2025/2026"} • Kolo: ${one.round || ""}` : "Uvezi tabelu u Adminu.";
}

// ADMIN modal
const adminModal = document.getElementById("adminModal");
const adminMenuBtn = document.getElementById("adminMenuBtn");
const adminClose = document.getElementById("adminClose");
const adminForms = document.getElementById("adminForms");

function openAdmin(){
drawer.classList.remove("open");
drawer.setAttribute("aria-hidden","true");
adminModal.classList.add("open");
adminModal.setAttribute("aria-hidden","false");
document.getElementById("pinInput").focus();
}
function closeAdmin(){
adminModal.classList.remove("open");
adminModal.setAttribute("aria-hidden","true");
}
adminMenuBtn.addEventListener("click", openAdmin);
adminClose.addEventListener("click", closeAdmin);
adminModal.addEventListener("click", (e)=>{ if(e.target === adminModal) closeAdmin(); });

let unlocked = false;
function setUnlocked(v){
unlocked = v;
adminForms.style.display = unlocked ? "block" : "none";
}
setUnlocked(false);

document.getElementById("unlockBtn").addEventListener("click", async ()=>{
const pin = String(document.getElementById("pinInput").value || "").trim();
if(!pin) return alert("Unesi PIN.");
try{
await adminPost({ pin, action:"ping" });
setUnlocked(true);
}catch(e){
alert("PIN pogrešan ili admin nije online.");
setUnlocked(false);
}
});

document.getElementById("lockBtn").addEventListener("click", ()=>{
setUnlocked(false);
document.getElementById("pinInput").value = "";
});

document.getElementById("uploadNewsImgBtn").addEventListener("click", async ()=>{
if(!unlocked) return alert("Unesi PIN.");
const pin = String(document.getElementById("pinInput").value || "").trim();
const f = document.getElementById("newsFile").files?.[0];
if(!f) return alert("Izaberi sliku.");

const hint = document.getElementById("uploadHint");
hint.textContent = "Upload...";

const reader = new FileReader();
reader.onload = async () => {
try{
const dataUrl = String(reader.result || "");
const base64 = dataUrl.split(",")[1] || "";
const resp = await adminPost({
pin,
action: "upload_media",
filename: f.name,
contentType: f.type || "image/jpeg",
base64
});
document.getElementById("nImage").value = resp.url;
hint.textContent = "Upload OK. Link upisan.";
}catch(e){
hint.textContent = "Upload error.";
alert(String(e.message || e));
}
};
reader.readAsDataURL(f);
});

document.getElementById("addNewsBtn").addEventListener("click", async ()=>{
if(!unlocked) return alert("Unesi PIN.");
const pin = String(document.getElementById("pinInput").value || "").trim();

const payload = {
pin,
action: "add_news",
title: String(document.getElementById("nTitle").value||"").trim(),
image_url: String(document.getElementById("nImage").value||"").trim(),
body: String(document.getElementById("nBody").value||"").trim()
};
if(!payload.title || !payload.body) return alert("Popuni naslov i tekst.");

await adminPost(payload);
await loadAll();
alert("Vest dodata.");
});

document.getElementById("addMatchBtn").addEventListener("click", async ()=>{
if(!unlocked) return alert("Unesi PIN.");
const pin = String(document.getElementById("pinInput").value || "").trim();

const payload = {
pin,
action: "add_match",
competition: String(document.getElementById("mComp").value||"").trim() || "Zona Dunav",
match_date: String(document.getElementById("mDate").value||"").trim(),
match_time: String(document.getElementById("mTime").value||"").trim(),
home_team: String(document.getElementById("mHome").value||"").trim(),
away_team: String(document.getElementById("mAway").value||"").trim(),
venue: String(document.getElementById("mVenue").value||"").trim(),
round: String(document.getElementById("mRound").value||"").trim(),
status: "scheduled"
};
if(!payload.home_team || !payload.away_team) return alert("Popuni timove.");

await adminPost(payload);
await loadAll();
alert("Utakmica dodata.");
});

document.getElementById("addPlayerBtn").addEventListener("click", async ()=>{
if(!unlocked) return alert("Unesi PIN.");
const pin = String(document.getElementById("pinInput").value || "").trim();
const num = parseInt(String(document.getElementById("pNum").value||"").trim(), 10);

const payload = {
pin,
action: "add_player",
full_name: String(document.getElementById("pName").value||"").trim(),
number: Number.isFinite(num) ? num : 0,
position_group: String(document.getElementById("pPos").value||"").trim()
};
if(!payload.full_name || !payload.number || !payload.position_group) return alert("Popuni polja.");

await adminPost(payload);
await loadAll();
alert("Igrač dodat.");
});

document.getElementById("importTableBtn").addEventListener("click", async ()=>{
if(!unlocked) return alert("Unesi PIN.");
const pin = String(document.getElementById("pinInput").value || "").trim();

const raw = String(document.getElementById("tablePaste").value||"").trim();
const season = String(document.getElementById("tSeason").value||"").trim() || "2025/2026";
const round = String(document.getElementById("tRound").value||"").trim() || "";

if(!raw) return alert("Nema teksta.");

const lines = raw.split(/\r?\n/).map(x=>x.trim()).filter(Boolean);
const rows = [];
for(const line of lines){
const p = line.split(";").map(x=>x.trim());
if(p.length < 9) continue;
rows.push({
team: p[0],
played: parseInt(p[1],10),
wins: parseInt(p[2],10),
draws: parseInt(p[3],10),
losses: parseInt(p[4],10),
goals_for: parseInt(p[5],10),
goals_against: parseInt(p[6],10),
goal_diff: parseInt(p[7],10),
points: parseInt(p[8],10)
});
}
if(!rows.length) return alert("Format: Tim;U;P;N;Por;DG;PG;GR;Bod");

await adminPost({ pin, action:"replace_table", season, round, rows });
await loadAll();
alert("Tabela uvezena.");
});

window.addEventListener("load", async ()=>{
try{
if(!SUPABASE_URL.includes("http")) throw new Error("Ubaci SUPABASE_URL i SUPABASE_ANON_KEY u index.html");
await loadAll();
}catch(e){
alert(String(e.message || e));
}
});
</script>
</body>
</html>